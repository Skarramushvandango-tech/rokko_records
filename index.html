<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ROKKO! Records</title>
  <link rel="preload" as="video" href="assets/movies/Intro_movie.mp4" type="video/mp4">
  <link rel="preload" as="image" href="assets/images/Logo.png">
  <link rel="stylesheet" href="assets/css/style.css" />
</head>
<body>

  <!-- Header / Logo + Burger -->
  <header class="site-header">
    <a class="brand" href="/">
      <img src="assets/images/Logo.png" alt="ROKKO! Records Logo">
    </a>
    <button class="burger" aria-label="Menü öffnen" aria-expanded="false" aria-controls="site-nav">
      <span></span><span></span><span></span>
    </button>
    <nav id="site-nav" class="drawer" hidden>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/artists/">Artists</a></li>
        <li><a href="/about/">About us</a></li>
        <li><a href="/news/">News</a></li>
        <li><a href="/contact/">Contact</a></li>
      </ul>
    </nav>
  </header>

  <!-- HERO-VIDEO: responsive + Cover-Zuschnitt -->
  <section class="hero">
    <div class="hero-video">
      <video id="introVideo"
             playsinline
             muted
             autoplay
             preload="auto"
             poster="assets/wallpaper/wallpaper.jpg">
        <source src="assets/movies/Intro_movie.mp4" type="video/mp4" />
        Dein Browser unterstützt das Video-Element nicht.
      </video>

      <!-- Mute/Unmute -->
      <button id="muteToggle" class="mute-btn" aria-label="Ton umschalten"></button>

      <!-- kleiner Hinweis beim ersten Besuch -->
      <div id="tapHint" class="tap-hint" hidden>Tippen für Ton</div>
    </div>
  </section>

  <main class="content">
    <section class="welcome">
      <h1>Welcome to ROKKO! Records</h1>
      <p>Independent Label. Rock’n’Roll, Funk & Freshness.</p>
    </section>
  </main>

  <script>
    // --- Burger Drawer ---
    const burger = document.querySelector('.burger');
    const nav = document.getElementById('site-nav');
    burger.addEventListener('click', () => {
      const open = burger.getAttribute('aria-expanded') === 'true';
      burger.setAttribute('aria-expanded', String(!open));
      nav.hidden = open;
    });

    // --- Video + Mute-Status merken ---
    const video = document.getElementById('introVideo');
    const btn = document.getElementById('muteToggle');
    const hint = document.getElementById('tapHint');
    const STORAGE_KEY = 'rokkoMuted';

    // Initial: aus LocalStorage lesen
    let saved = localStorage.getItem(STORAGE_KEY);
    if (saved === null) {
      // Erster Besuch: Browser verlangt Autoplay muted
      saved = 'true';
      localStorage.setItem(STORAGE_KEY, saved);
      hint.hidden = false; // Hinweis einmal anzeigen
      setTimeout(()=>{ hint.hidden = true; }, 3000);
    }
    const startMuted = (saved === 'true');
    video.muted = startMuted;
    updateBtn();

    // iOS-Safari: nach User-Tap Ton erlauben
    btn.addEventListener('click', () => {
      video.muted = !video.muted;
      if (!video.muted) {
        // Versuche Ton zu starten (User-Geste liegt vor)
        video.play().catch(()=>{});
      }
      localStorage.setItem(STORAGE_KEY, String(video.muted));
      updateBtn();
    });

    function updateBtn(){
      btn.classList.toggle('is-muted', video.muted);
      btn.setAttribute('aria-label', video.muted ? 'Ton einschalten' : 'Ton stummschalten');
    }

    // Sicherstellen, dass das Video immer läuft (einige Browser pausieren Autoplay)
    document.addEventListener('visibilitychange', () => {
      if (!document.hidden && video.paused) {
        video.play().catch(()=>{});
      }
    });
  </script>
</body>
</html>
